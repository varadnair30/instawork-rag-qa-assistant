<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAG QA Assistant - System Architecture</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 30px;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            padding: 50px;
            box-shadow: 0 25px 70px rgba(0,0,0,0.35);
            max-width: 1500px;
            width: 100%;
        }
        
        h1 {
            text-align: center;
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 2.8rem;
            font-weight: 700;
        }
        
        .subtitle {
            text-align: center;
            color: #718096;
            margin-bottom: 50px;
            font-size: 1.3rem;
            font-weight: 400;
        }
        
        svg {
            width: 100%;
            height: auto;
            display: block;
        }
        
        .legend {
            display: flex;
            justify-content: center;
            gap: 35px;
            margin-top: 40px;
            flex-wrap: wrap;
            padding: 20px;
            background: #f7fafc;
            border-radius: 10px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
            font-weight: 500;
            color: #2d3748;
        }
        
        .legend-box {
            width: 24px;
            height: 24px;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .data-flow {
            margin-top: 40px;
            padding: 30px;
            background: #f7fafc;
            border-radius: 12px;
            border-left: 5px solid #667eea;
        }
        
        .data-flow h3 {
            margin-bottom: 20px;
            color: #2d3748;
            font-size: 1.5rem;
        }
        
        .data-flow ol {
            margin-left: 25px;
            color: #4a5568;
            line-height: 2;
            font-size: 15px;
        }
        
        .data-flow strong {
            color: #2d3748;
            font-weight: 600;
        }
        
        @media print {
            body {
                background: white;
                padding: 0;
            }
            .container {
                box-shadow: none;
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç RAG QA Assistant Architecture</h1>
        <p class="subtitle">Intelligent Test Case Retrieval System</p>
        
        <svg viewBox="0 0 1400 1050" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <linearGradient id="userGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                    <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
                </linearGradient>
                
                <linearGradient id="processGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                    <stop offset="0%" style="stop-color:#48bb78;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#38a169;stop-opacity:1" />
                </linearGradient>
                
                <linearGradient id="embedGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                    <stop offset="0%" style="stop-color:#4299e1;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#3182ce;stop-opacity:1" />
                </linearGradient>
                
                <linearGradient id="vectorGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                    <stop offset="0%" style="stop-color:#ed8936;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#dd6b20;stop-opacity:1" />
                </linearGradient>
                
                <linearGradient id="llmGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                    <stop offset="0%" style="stop-color:#f56565;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#e53e3e;stop-opacity:1" />
                </linearGradient>
                
                <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                    <polygon points="0 0, 10 3, 0 6" fill="#2d3748" />
                </marker>
                
                <filter id="shadow">
                    <feDropShadow dx="0" dy="2" stdDeviation="3" flood-opacity="0.2"/>
                </filter>
            </defs>
            
            <!-- LAYER 1: USER INTERFACE -->
            <rect x="50" y="20" width="1300" height="110" rx="12" fill="url(#userGrad)" opacity="0.9" filter="url(#shadow)"/>
            <text x="700" y="55" text-anchor="middle" fill="white" font-size="22" font-weight="bold">USER INTERFACE LAYER</text>
            
            <rect x="200" y="75" width="220" height="45" rx="6" fill="white" stroke="#667eea" stroke-width="3" filter="url(#shadow)"/>
            <text x="310" y="103" text-anchor="middle" fill="#667eea" font-size="15" font-weight="bold">üì± Streamlit Web UI</text>
            
            <rect x="980" y="75" width="220" height="45" rx="6" fill="white" stroke="#667eea" stroke-width="3" filter="url(#shadow)"/>
            <text x="1090" y="103" text-anchor="middle" fill="#667eea" font-size="15" font-weight="bold">üíª CLI Interface</text>
            
            <text x="310" y="155" text-anchor="middle" fill="#5a67d8" font-size="13" font-weight="bold">‚Üì 1. User Query</text>
            <text x="1090" y="155" text-anchor="middle" fill="#5a67d8" font-size="13" font-weight="bold">‚Üì 1. User Query</text>
            
            <line x1="310" y1="120" x2="310" y2="190" stroke="#2d3748" stroke-width="4" marker-end="url(#arrowhead)"/>
            <line x1="1090" y1="120" x2="1090" y2="190" stroke="#2d3748" stroke-width="4" marker-end="url(#arrowhead)"/>
            
            <!-- LAYER 2: CORE ENGINE -->
            <rect x="50" y="190" width="1300" height="110" rx="12" fill="#2d3748" opacity="0.08"/>
            <text x="700" y="225" text-anchor="middle" fill="#2d3748" font-size="22" font-weight="bold">CORE RAG ENGINE (app.py)</text>
            
            <rect x="500" y="245" width="400" height="50" rx="8" fill="#2d3748" stroke="#1a202c" stroke-width="2" filter="url(#shadow)"/>
            <text x="700" y="268" text-anchor="middle" fill="white" font-size="16" font-weight="bold">TestCaseRAG Class</text>
            <text x="700" y="285" text-anchor="middle" fill="#cbd5e0" font-size="12">Main orchestrator &amp; query handler</text>
            
            <line x1="700" y1="295" x2="700" y2="340" stroke="#2d3748" stroke-width="4" marker-end="url(#arrowhead)"/>
            
            <!-- LAYER 3: PROCESSING MODULES -->
            <rect x="50" y="340" width="1300" height="140" rx="12" fill="url(#processGrad)" opacity="0.08"/>
            
            <rect x="120" y="365" width="300" height="90" rx="10" fill="url(#processGrad)" stroke="#38a169" stroke-width="3" filter="url(#shadow)"/>
            <text x="270" y="395" text-anchor="middle" fill="white" font-size="17" font-weight="bold">üîç Query Processor</text>
            <text x="270" y="418" text-anchor="middle" fill="white" font-size="12">‚Ä¢ Spacy NLP</text>
            <text x="270" y="435" text-anchor="middle" fill="white" font-size="12">‚Ä¢ Lemmatization</text>
            <text x="270" y="450" text-anchor="middle" fill="white" font-size="12">‚Ä¢ Query Expansion</text>
            
            <text x="270" y="500" text-anchor="middle" fill="#2f855a" font-size="13" font-weight="bold">‚Üì 2. Process &amp; Extract</text>
            
            <rect x="550" y="365" width="300" height="90" rx="10" fill="url(#processGrad)" stroke="#38a169" stroke-width="3" filter="url(#shadow)"/>
            <text x="700" y="395" text-anchor="middle" fill="white" font-size="17" font-weight="bold">‚ö° Retrieval Engine</text>
            <text x="700" y="418" text-anchor="middle" fill="white" font-size="12">‚Ä¢ Vector Search</text>
            <text x="700" y="435" text-anchor="middle" fill="white" font-size="12">‚Ä¢ Keyword Boosting</text>
            <text x="700" y="450" text-anchor="middle" fill="white" font-size="12">‚Ä¢ Adaptive Filtering</text>
            
            <text x="700" y="500" text-anchor="middle" fill="#c05621" font-size="13" font-weight="bold">‚Üì 4. Vector Search</text>
            
            <rect x="980" y="365" width="300" height="90" rx="10" fill="url(#processGrad)" stroke="#38a169" stroke-width="3" filter="url(#shadow)"/>
            <text x="1130" y="395" text-anchor="middle" fill="white" font-size="17" font-weight="bold">ü§ñ Generation Engine</text>
            <text x="1130" y="418" text-anchor="middle" fill="white" font-size="12">‚Ä¢ Answer Formatting</text>
            <text x="1130" y="435" text-anchor="middle" fill="white" font-size="12">‚Ä¢ LLM Integration</text>
            <text x="1130" y="450" text-anchor="middle" fill="white" font-size="12">‚Ä¢ Citation Verification</text>
            
            <text x="1130" y="500" text-anchor="middle" fill="#c53030" font-size="13" font-weight="bold">‚Üì 5. Generate Answer</text>
            
            <line x1="270" y1="455" x2="270" y2="530" stroke="#2d3748" stroke-width="3" marker-end="url(#arrowhead)"/>
            <line x1="700" y1="455" x2="700" y2="530" stroke="#2d3748" stroke-width="3" marker-end="url(#arrowhead)"/>
            <line x1="1130" y1="455" x2="1130" y2="800" stroke="#2d3748" stroke-width="3" marker-end="url(#arrowhead)"/>
            
            <!-- LAYER 4: MODELS & DATA -->
            
            <rect x="120" y="530" width="300" height="115" rx="10" fill="url(#embedGrad)" stroke="#3182ce" stroke-width="3" filter="url(#shadow)"/>
            <text x="270" y="560" text-anchor="middle" fill="white" font-size="18" font-weight="bold">üìä Embedding Model</text>
            <text x="270" y="585" text-anchor="middle" fill="white" font-size="14" font-weight="600">all-MiniLM-L6-v2</text>
            <text x="270" y="608" text-anchor="middle" fill="white" font-size="12">‚Ä¢ 384 dimensions</text>
            <text x="270" y="625" text-anchor="middle" fill="white" font-size="12">‚Ä¢ Sentence Transformers</text>
            <text x="270" y="640" text-anchor="middle" fill="white" font-size="12">‚Ä¢ Fast inference</text>
            
            <text x="270" y="685" text-anchor="middle" fill="#2c5282" font-size="13" font-weight="bold">‚Üì 3. Generate Embeddings</text>
            
            <rect x="550" y="530" width="300" height="225" rx="10" fill="url(#vectorGrad)" stroke="#dd6b20" stroke-width="3" filter="url(#shadow)"/>
            <text x="700" y="560" text-anchor="middle" fill="white" font-size="18" font-weight="bold">üóÑÔ∏è Vector Store</text>
            <text x="700" y="580" text-anchor="middle" fill="white" font-size="14" font-weight="600">ChromaDB</text>
            <text x="700" y="608" text-anchor="middle" fill="white" font-size="12">‚Ä¢ Cosine similarity</text>
            <text x="700" y="628" text-anchor="middle" fill="white" font-size="12">‚Ä¢ HNSW index</text>
            <text x="700" y="648" text-anchor="middle" fill="white" font-size="12">‚Ä¢ In-memory storage</text>
            
            <rect x="575" y="675" width="250" height="70" rx="6" fill="white" stroke="#ed8936" stroke-width="2"/>
            <text x="700" y="698" text-anchor="middle" fill="#c05621" font-size="13" font-weight="bold">5 Semantic Chunks per Test:</text>
            <text x="700" y="718" text-anchor="middle" fill="#c05621" font-size="11">Overview | Preconditions | Steps</text>
            <text x="700" y="735" text-anchor="middle" fill="#c05621" font-size="11">Keywords | Metadata</text>
            
            <line x1="420" y1="590" x2="550" y2="590" stroke="#2d3748" stroke-width="3" marker-end="url(#arrowhead)"/>
            
            <line x1="700" y1="755" x2="700" y2="800" stroke="#2d3748" stroke-width="3" marker-end="url(#arrowhead)"/>
            
            <rect x="980" y="530" width="300" height="115" rx="10" fill="#f7fafc" stroke="#2d3748" stroke-width="3" filter="url(#shadow)"/>
            <text x="1130" y="560" text-anchor="middle" fill="#2d3748" font-size="18" font-weight="bold">üìÅ Test Cases</text>
            <text x="1130" y="588" text-anchor="middle" fill="#4a5568" font-size="13" font-weight="600">24 JSON files</text>
            <text x="1130" y="610" text-anchor="middle" fill="#4a5568" font-size="12">test_cases/*.json</text>
            <text x="1130" y="630" text-anchor="middle" fill="#4a5568" font-size="12">120 chunks total</text>
            
            <line x1="980" y1="590" x2="850" y2="590" stroke="#2d3748" stroke-width="3" stroke-dasharray="8,4" marker-end="url(#arrowhead)"/>
            <text x="915" y="575" text-anchor="middle" fill="#4a5568" font-size="11" font-weight="600">Indexed at startup</text>
            
            <rect x="980" y="670" width="300" height="130" rx="10" fill="#e6fffa" stroke="#319795" stroke-width="3" filter="url(#shadow)"/>
            <text x="1130" y="700" text-anchor="middle" fill="#234e52" font-size="16" font-weight="bold">‚ú® Key Features</text>
            <text x="1000" y="728" fill="#234e52" font-size="12">‚úì Smart 5-chunk strategy</text>
            <text x="1000" y="750" fill="#234e52" font-size="12">‚úì Query expansion</text>
            <text x="1000" y="772" fill="#234e52" font-size="12">‚úì Dynamic keyword boost</text>
            <text x="1000" y="794" fill="#234e52" font-size="12">‚úì Zero hallucination mode</text>
            
            <rect x="550" y="800" width="300" height="115" rx="10" fill="url(#llmGrad)" stroke="#e53e3e" stroke-width="3" filter="url(#shadow)"/>
            <text x="700" y="830" text-anchor="middle" fill="white" font-size="18" font-weight="bold">üß† LLM Model</text>
            <text x="700" y="855" text-anchor="middle" fill="white" font-size="14" font-weight="600">FLAN-T5-Base</text>
            <text x="700" y="878" text-anchor="middle" fill="white" font-size="12">‚Ä¢ 248M parameters</text>
            <text x="700" y="895" text-anchor="middle" fill="white" font-size="12">‚Ä¢ Instruction-tuned</text>
            <text x="700" y="910" text-anchor="middle" fill="white" font-size="12">‚Ä¢ Zero hallucination mode</text>
            
            <rect x="120" y="800" width="300" height="115" rx="10" fill="#48bb78" stroke="#38a169" stroke-width="4" filter="url(#shadow)"/>
            <text x="270" y="835" text-anchor="middle" fill="white" font-size="20" font-weight="bold">‚úÖ Final Answer</text>
            <text x="270" y="865" text-anchor="middle" fill="white" font-size="14" font-weight="600">Structured + AI Summary</text>
            <text x="270" y="890" text-anchor="middle" fill="white" font-size="14" font-weight="600">with Source Citations</text>
            <text x="270" y="908" text-anchor="middle" fill="white" font-size="11">Delivered to User Interface</text>
            
            <line x1="550" y1="857" x2="420" y2="857" stroke="#2d3748" stroke-width="4" marker-end="url(#arrowhead)"/>
            
            <rect x="120" y="945" width="300" height="85" rx="8" fill="#edf2f7" stroke="#4a5568" stroke-width="2" filter="url(#shadow)"/>
            <text x="270" y="972" text-anchor="middle" fill="#2d3748" font-size="15" font-weight="bold">üìà System Metrics</text>
            <text x="145" y="995" fill="#4a5568" font-size="11">‚Ä¢ Query time: &lt;1 second</text>
            <text x="145" y="1012" fill="#4a5568" font-size="11">‚Ä¢ Accuracy: 100% ‚Ä¢ Grade: A</text>
            
            <rect x="550" y="945" width="300" height="85" rx="8" fill="#fff5f5" stroke="#fc8181" stroke-width="2" filter="url(#shadow)"/>
            <text x="700" y="972" text-anchor="middle" fill="#742a2a" font-size="15" font-weight="bold">üîß Technology Stack</text>
            <text x="700" y="995" text-anchor="middle" fill="#742a2a" font-size="11">Python ‚Ä¢ Transformers ‚Ä¢ ChromaDB</text>
            <text x="700" y="1012" text-anchor="middle" fill="#742a2a" font-size="11">Spacy ‚Ä¢ NLTK ‚Ä¢ Streamlit</text>
            
            <rect x="980" y="945" width="300" height="85" rx="8" fill="#fef5e7" stroke="#d69e2e" stroke-width="2" filter="url(#shadow)"/>
            <text x="1130" y="972" text-anchor="middle" fill="#744210" font-size="15" font-weight="bold">üéØ Capabilities</text>
            <text x="1000" y="995" fill="#744210" font-size="11">‚Ä¢ 24 test cases indexed</text>
            <text x="1000" y="1012" fill="#744210" font-size="11">‚Ä¢ Offline mode ‚Ä¢ Multi-language</text>
        </svg>
        
        <div class="legend">
            <div class="legend-item">
                <div class="legend-box" style="background: linear-gradient(135deg, #667eea, #764ba2);"></div>
                <span>User Interface</span>
            </div>
            <div class="legend-item">
                <div class="legend-box" style="background: linear-gradient(135deg, #48bb78, #38a169);"></div>
                <span>Processing Modules</span>
            </div>
            <div class="legend-item">
                <div class="legend-box" style="background: linear-gradient(135deg, #4299e1, #3182ce);"></div>
                <span>Embedding Model</span>
            </div>
            <div class="legend-item">
                <div class="legend-box" style="background: linear-gradient(135deg, #ed8936, #dd6b20);"></div>
                <span>Vector Store</span>
            </div>
            <div class="legend-item">
                <div class="legend-box" style="background: linear-gradient(135deg, #f56565, #e53e3e);"></div>
                <span>LLM Model</span>
            </div>
        </div>
        
        <div class="data-flow">
            <h3>üìä Data Flow Summary</h3>
            <ol>
                <li><strong>User Query:</strong> Natural language question enters via Streamlit UI or CLI interface</li>
                <li><strong>Query Processing:</strong> Spacy performs lemmatization, keyword extraction, and query expansion</li>
                <li><strong>Embedding Generation:</strong> Query converted to 384-dimensional vector using sentence-transformers</li>
                <li><strong>Vector Search:</strong> ChromaDB finds top K√ó3 most similar chunks using cosine similarity</li>
                <li><strong>Smart Ranking:</strong> Dynamic keyword boosting, per-file aggregation, and adaptive filtering</li>
                <li><strong>Answer Generation:</strong> FLAN-T5 creates structured answer with AI summary and citations</li>
                <li><strong>Response Delivery:</strong> Formatted answer displayed with relevance scores and source files</li>
            </ol>
        </div>
    </div>
</body>
</html>